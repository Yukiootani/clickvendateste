<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="config.js"></script>
    <style>
        :root { --primary: #333; --accent: #Cca43b; --bg: #FDFBF7; --text: #333; }
        body { font-family:'Montserrat',sans-serif; background:var(--bg); color:var(--text); margin:0; padding-bottom:80px; }
        .header { padding:15px; position:absolute; top:0; left:0; z-index:10; }
        .header a { color:var(--primary); background:rgba(255,255,255,0.8); padding:10px; border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center; text-decoration:none; }
        #prod-img { width:100%; height:400px; object-fit:cover; }
        .content { padding:25px; background:var(--bg); position:relative; top:-20px; border-radius:20px 20px 0 0; }
        .price { font-size:1.8em; color:var(--accent); font-weight:700; margin-bottom:20px; }
        .action-bar { position:fixed; bottom:0; left:0; width:100%; background:white; padding:15px; display:flex; gap:10px; box-sizing:border-box; }
        button { flex:1; padding:15px; border:none; border-radius:10px; font-weight:bold; font-size:1em; cursor:pointer; }
        .btn-add { background:var(--primary); color:white; }
        .btn-zap { background:#25d366; color:white; }
    </style>
</head>
<body>
    <div class="header"><a href="index.html"><i class="fas fa-arrow-left"></i></a></div>
    <img id="prod-img" src="">
    <div class="content">
        <h1 id="prod-name">...</h1>
        <div class="price" id="prod-price"></div>
        <p id="prod-desc"></p>
    </div>
    <div class="action-bar">
        <button class="btn-add" onclick="addToCart()">ADICIONAR</button>
        <button class="btn-zap" onclick="buyNow()"><i class="fab fa-whatsapp"></i> COMPRAR</button>
    </div>
    <script>
        const db = firebase.firestore();
        const urlParams = new URLSearchParams(window.location.search);
        const pid = urlParams.get('id');
        let productData = null;
        async function load() {
            if(!pid) return;
            const doc = await db.collection('products').doc(pid).get();
            if(doc.exists) {
                productData = doc.data();
                document.getElementById('prod-img').src = productData.imageUrl;
                document.getElementById('prod-name').innerText = productData.name;
                document.getElementById('prod-price').innerText = '¥ ' + productData.price;
            }
        }
        function addToCart() {
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            cart.push(productData);
            localStorage.setItem('cart', JSON.stringify(cart));
            alert("Adicionado!");
        }
        function buyNow() {
            const msg = `Olá! Quero comprar: ${productData.name}`;
            window.location.href = `https://wa.me/?text=${encodeURIComponent(msg)}`;
        }
        load();
    </script>
</body>
</html>